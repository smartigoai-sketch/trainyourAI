<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smartigo PRO — Success</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"/>
<link rel="icon" href="/smartigo-logo.png" type="image/png"/>
<style>
  :root{
    --bg:#0b0b0f;--card:#121218;--text:#eaeaf2;--muted:#a8a8b3;--accent1:#5dcdf0;--accent2:#8d7cfb;--border:#1d1d26;
  }
  body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;}
  .container{max-width:1120px;margin:0 auto;padding:20px}
  .card{max-width:720px;margin:60px auto;background:var(--card);border:1px solid var(--border);padding:28px;text-align:center}
  h1{margin:0 0 8px;font-size:26px}
  p{color:var(--muted)}
  input[type=email]{width:100%;padding:12px;background:#16161f;border:1px solid var(--border);color:var(--text);border-radius:4px;margin-top:10px}
  .btn{display:inline-block;width:100%;margin-top:12px;padding:12px 18px;border:none;border-radius:0;
       font-weight:700;cursor:pointer;background:linear-gradient(135deg,var(--accent1),var(--accent2));color:#0b0b0f}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 0;border-bottom:1px solid var(--border)}
  .nav a{color:var(--muted);text-decoration:none}
</style>
</head>
<body>
  <header class="container">
    <div class="nav">
      <a href="/" aria-label="Home" style="display:flex;align-items:center;gap:8px">
        <img src="/smartigo-logo.png" width="32" height="32" alt="Smartigo"/>
        <strong style="letter-spacing:.3px;color:var(--text)">Smartigo</strong>
      </a>
      <nav style="display:flex;gap:16px">
        <a href="/">Home</a>
        <a href="/pro" style="color:var(--accent1)">PRO</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="card">
      <h1>Payment completed ✅</h1>
      <p>Activating your Smartigo PRO…</p>
      <div id="status" style="margin-top:12px;"></div>
    </div>
  </main>

<script>
(async function(){
  const status = document.getElementById('status');
  let email = localStorage.getItem('smartigo_email') || '';

  function showManual(){
    status.innerHTML = 'We could not detect your email. Please enter it to activate PRO:';
    const input = document.createElement('input');
    input.type = 'email';
    input.placeholder = 'your@email.com';
    const btn = document.createElement('button');
    btn.textContent = 'Activate PRO';
    btn.className = 'btn';
    btn.onclick = () => activate(input.value);
    status.appendChild(input);
    status.appendChild(btn);
  }

  async function activate(e){
    const em = (e||'').trim();
    if(!em) return;
    try {
      const url = 'https://script.google.com/macros/s/AKfycbwGOZPX8cFOElL1MpHH5YD_SRpD6Jl2zSkoigB8RxQOC1LulqMSZty5A_-yJ4-fvKOKTA/exec' + // <-- INCOLLA QUI l’URL WebApp (doGet)
                  '?action=prosignup&email=' + encodeURIComponent(em);
      await fetch(url, { mode:'no-cors' }); // lancio “fire-and-forget”
      status.innerHTML = 'PRO activated for <b>'+em+'</b>. You will receive your next email within 24h.';
    } catch(err){
      status.innerHTML = 'Activation failed. Please write to <a href="mailto:smartigoai@gmail.com">smartigoai@gmail.com</a>.';
    }
  }

  if(!email){ showManual(); } else { activate(email); }
})();
</script>
</body>
</html>
